<html>
<title>弾を撃つ</title>
<meta http-equiv="Content-Type" content="text/html; charset=euc-jp">
<body>
<font size=3><P>
<table bgcolor=#eeddff>
<tr>
<td bgcolor=#ccaaff width=16></td>
<td> <a href="a_bc_ab_b5_a1_a4_f2_c6_b0_a4_ab_a4_b9.html">←前</a>  <a href="_c5_a8_a4_f2_c6_b0_a4_ab_a4_b9.html">次→</a>  <a href="_a5_b7_a5_e5_a1_bc_a5_c6_a5_a3_a5_f3_a5_b0_a5_b2_a1_bc_a5_e0_a4_ce_ba_ee_c0_ae.html">トップ</a></td>
</tr></table>
<P>
<a name="1"><font size="5">弾を撃つ</font>
		    
		    <BR><BR>
<ul>
<li>弾を作る
</ul>
<P>
<a href="a_a5_aa_a5_d6_a5_b8_a5_a7_a5_af_a5_c8_a4_f2_ba_ee_a4_eb.html">オブジェクトを作る</a>を参考に弾のオブジェクトを作ります。
<P>
<img src="../uploads/newTama%2epng" alt="newTama.png" border=0>
<P>
<a href="a_a5_aa_a5_d6_a5_b8_a5_a7_a5_af_a5_c8_a4_ce_a5_ad_a5_e3_a5_e9_a5_af_a5_bf_a5_d1_a5_bf_a1_bc_a5_f3_a4_f2_bb_d8_c4_ea_a4_b9_a4_eb.html">オブジェクトのキャラクタパターンを指定する</a>を参考に、弾のパターンを指定します
<P>
<img src="../uploads/tamapat%2epng" alt="tamapat.png" border=0>
<P>
弾をダブルクリックし、次のように入力します。
<P>
<table border=1 bgcolor="#ffffee">
<P>
<P>
<tr>
<td><pre> 
extends SpriteChar;
while(y&gt;0) {
&nbsp;y=y-8;
&nbsp;update();
}</pre></td>
</tr></table>
<P>
実行すると、弾が上に飛んでいくのが見えます。
よく見えなかった場合、F2で止めて、弾をドラッグして下の方にもっていくと見やすいでしょう。
<P>
<ul>
<li>スペースキーを押すと弾が出る
</ul>
<P>
しかし実際には弾は自機から発射するものです。
スペースキーを押すと自機から弾が出るようにしましょう。
<P>
自機をダブルクリックし、次のように変更します
<P>
<table border=1 bgcolor="#ffffee">
<P>
<P>
<tr>
<td><pre> 
extends SpriteChar;
while(1) {
 &nbsp;if (getkey(39)&gt;0 && x&lt;$screenWidth ) x=x+3;
 &nbsp;if (getkey(37)&gt;0 && x&gt;0) x=x-3;
<font color="ee1111"> &nbsp;if (getkey(32)==1) appear(new Tama(x,y,$pat_Sample+1));</font>
  update();
}</pre></td>
</tr></table>
<P>
まず前半部(if文の条件)から解説します
<P>
<table bgcolor=#ddddff><tr><td><pre>
<P>
if (getkey(32)==1) ...</pre></td></tr></table>
<P>
これは、<a href="a_bc_ab_b5_a1_a4_f2_c6_b0_a4_ab_a4_b9.html">自機を動かす</a>でも出てきましたが、キーの状態を判定します
32はスペースキーを表す番号です。スペースキーが押された瞬間だけ
if文のあとの処理を行います(押しっぱなしでは弾が撃てません)
<P>
そして、スペースキーがおされていた場合の、弾を撃つ処理です
<P>
<table bgcolor=#ddddff><tr><td><pre>
<P>
... appear(new Tama(x,y,$pat_Sample+1));</pre></td></tr></table>
<P>
これは、新しいオブジェクトを作るときの決まり文句で、次のような
パラメータを指定します。
<P>
<table bgcolor="#ddffee" border=0>
  <tr bgcolor="#ccffdd"><td> 
   <font color=black><strong>書式</strong></font>
  </td></tr>
  <tr><td><tt> appear(new クラス名 ( x座標 , y座標 ,キャラクタパターン ))</tt></td></tr>
</table>  
<P>
<i>クラス名</i>には、作成したいオブジェクトのクラス名を指定します。
...といっても、クラスの話は少し難しいので、ここでは次の手順でクラス名を決めてください。
<P>
まず、今は弾を出したいのですから、とりあえず画面上の弾をクリックします。
<P>
すると、オブジェクトインスペクタに弾の内容が表示されますが、「クラス名」という欄に注目してください。
ここに「Tama」とかいてあります。これが弾のクラス名になります
<P>
<img src="../uploads/tamaclass%2epng" alt="tamaclass.png" border=0>
<P>
<ul>
<li><i>x座標</i> , <i>y座標</i>
</ul>
<P>
作成するオブジェクトの位置を指定します。ここでは、自機から発射されるので、自機のx,y座標をそのまま使います
<P>
<ul>
<li><i>キャラクタパターン</i>
</ul>
<P>
作成するオブジェクトのキャラクタパターンを指定します。
キャラクタパターンを指定するには、下図のように、キャラクタパターンウィンドウからキャラクタパターンを選ぶと、ステータスバーのところにキャラクタパターンの値が表示されます。この値（$pat_Sample+1）をパラメータとして記述します。同時に、この値がクリップボードにコピーされます。
<P>
<img src="../uploads/selTamaP%2epng" alt="selTamaP.png" border=0>
<P>
さて、これで実行させてみましょう。スペースキーを押すと弾が発射されるようになりました。
<P>
<table bgcolor=#eeddff>
<tr>
<td bgcolor=#ccaaff width=16></td>
<td> <a href="a_bc_ab_b5_a1_a4_f2_c6_b0_a4_ab_a4_b9.html">←前</a>  <a href="_c5_a8_a4_f2_c6_b0_a4_ab_a4_b9.html">次→</a>  <a href="_a5_b7_a5_e5_a1_bc_a5_c6_a5_a3_a5_f3_a5_b0_a5_b2_a1_bc_a5_e0_a4_ce_ba_ee_c0_ae.html">トップ</a></td>
</tr></table>
 
</font>
</body></html>