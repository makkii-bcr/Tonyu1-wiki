<html>
<title>オブジェクトを動かす2</title>
<meta http-equiv="Content-Type" content="text/html; charset=euc-jp">
<body>
<font size=3><P>
<table bgcolor=#eeddff>
<tr>
<td bgcolor=#ccaaff width=16></td>
<td> <a href="a_a5_aa_a5_d6_a5_b8_a5_a7_a5_af_a5_c8_a4_f2_c6_b0_a4_ab_a4_b9.html">←前</a>  <a href="_a5_aa_a5_d6_a5_b8_a5_a7_a5_af_a5_c8_a4_f2_a5_b3_a5_d4_a1_bc_a4_b9_a4_eb.html">次→</a>  <a href="_a5_c1_a5_e5_a1_bc_a5_c8_a5_ea_a5_a2_a5_eb.html">チュートリアルトップ</a></td>
</tr></table>
<P>
<a name="1"><font size="5">オブジェクトを動かす2</font>
		    
		    <BR><BR>
先ほど書いたプログラムについて解説します。
<P>
<table border=1 bgcolor="#ffffee">
<P>
<P>
<tr>
<td><pre> 
1:extends SpriteChar;
2:
3:while(x&lt;$screenWidth) {
4: x+=1;
5: update();
6:}</pre></td>
</tr></table>
<P>
<ul>
<li>1行目は「おまじない」だと思ってとりあえず無視してください。
<li>3行目は「自分のx座標が画面右端の座標($screenWidth)より小さい（$screenWidthより左側である）間、で囲まれた処理（4,5行目)を実行しなさい」という意味になります(参考：<a href="while.html">while文</a>)
<li>4行目は、x座標を1増加、つまり右に１ドット分移動します
<li>5行目は、画面のかきかえを行います(参考：<a href="PlainChar.update.html">updateメソッド</a>)
</ul>
<P>
もう少し複雑な動きをするオブジェクトを作ってみましょう
<P>
<a href="a_a5_aa_a5_d6_a5_b8_a5_a7_a5_af_a5_c8_a4_f2_ba_ee_a4_eb.html">オブジェクトを作る</a>を参考に、新しいオブジェクトを作成します
<P>
<img src="../uploads/class2%2epng" alt="class2.png" border=0>
<P>
新しいオブジェクトをダブルクリックして、次のように入力します(先頭のextends SpriteChar;は自動的に入力されているので新たに入力する必要はありません)
<P>
<table border=1 bgcolor="#ffffee">
<P>
<P>
<tr>
<td><pre> 
extends SpriteChar;
while(x&lt;$screenWidth) {
&nbsp;y+=vy;
&nbsp;vy+=0.1;
&nbsp;if (y&gt;$screenHeight) {y=$screenHeight; vy=-vy;}
&nbsp;x+=1;
&nbsp;update();
}</pre></td>
</tr></table>
<P>
実行してみましょう。オブジェクトが跳ねながら右に移動する様子が見えたと
思います。
<P>
さっきと違うのは、この３行が追加されたところです
<P>
<table bgcolor=#ddddff><tr><td><pre>
 
4: y+=vy;
5: vy+=0.1;
6: if (y&gt;$screenHeight) {y=$screenHeight; vy=-vy;}</pre></td></tr></table>
<P>
<ul>
<li>4行目は、自分のy座標をvyだけ加算します。つまりvyはyの速度をあらわします
<li>5行目は、vyに0.1を加えます。yの速度に0.1を加えるので、0.1はyの加速度（重力）をあらわします。
<li>6行目は、跳ね返りの処理です。まず、
</ul>
<P>
<table bgcolor=#ddddff><tr><td><pre>
<P>
 if (y&gt;$screenHeight) ...</pre></td></tr></table>
<P>
これは、もし( if )yが画面下端の座標($screenHeight)より大きくなったら、つまり
yが画面下端より下になったら、その後ろの{とで囲まれた部分を実行しなさい
という意味です。
<P>
　そして、その{と}で囲まれた部分
<P>
<table bgcolor=#ddddff><tr><td><pre>
<P>
 ... {y=$screenHeight; vy=-vy;}</pre></td></tr></table>
<P>
これは、yを$screenHeightにして、下にはみ出ないようにします。
さらにvyの符号を反転(=移動方向のy成分を反転)します。
<P>
この「もし～なら～する」という記述は<a href="if.html">if</a>文と呼ばれ、今後もよく出てくるので覚えておいてください
<P>
<table bgcolor="#ddffee" border=0>
  <tr bgcolor="#ccffdd"><td> 
   <font color=black><strong>書式</strong></font>
  </td></tr>
  <tr><td><tt> if (条件) 処理</tt></td></tr>
</table>  
<P>
条件に書いた式が真であるときだけ処理を行います
<P>
<table bgcolor=#eeddff>
<tr>
<td bgcolor=#ccaaff width=16></td>
<td> <a href="a_a5_aa_a5_d6_a5_b8_a5_a7_a5_af_a5_c8_a4_f2_c6_b0_a4_ab_a4_b9.html">←前</a>  <a href="_a5_aa_a5_d6_a5_b8_a5_a7_a5_af_a5_c8_a4_f2_a5_b3_a5_d4_a1_bc_a4_b9_a4_eb.html">次→</a>  <a href="_a5_c1_a5_e5_a1_bc_a5_c8_a5_ea_a5_a2_a5_eb.html">チュートリアルトップ</a></td>
</tr></table>
 
</font>
</body></html>